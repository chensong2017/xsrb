<?php
namespace Home\Controller;
use Think\Controller;
//数码产品库存表期初
class SMCPKCQCController extends Controller{
    
   
    //数码产品库存表期初提交
    public function submit(){
        header("Access-Control-Allow-Origin: *");
        $jsonData=json_decode(file_get_contents("php://input"),true);
        $temp=array();
        $redis = new \Redis();
        $redis->connect("192.111.111.4","6379");
        //默认部门为admin
        $dept="admin";
        $now=date("Ym");
        $key="report-$dept-$now-SMCPKCQC";
       
       //提交的json数据
        $temp["TJ"]=$jsonData;
        
        //计算的json对应的数据
        $data=$jsonData['data'];
        foreach($data as $tr){
            $tds=$tr['tr'];
            
            foreach($tds as $td){
                $type=trim($td['type']);
                $type_detail=trim($td['type_detail']);
                $product_type=trim($td['product_type']);
                $product=trim($td['product']);
                $value=$td['value'];
                $key1=md5($product_type.$product.$type_detail);
                //$key1=$product_type.$product.$type_detail;
                if($product=="三合一(大机)"&&$product_type=="三代机"&&$type_detail=="有效结存")
                    echo "<br>".$key1;
                //如果value 数据合法则存入数据库
                if(is_numeric($value)&&$value>0)
                    $temp['QC']["$key1"]=$value;
            }
        }
        
        $result=$redis->set($key,json_encode($temp));
           
        if($result)
           echo '{"resultcode":0,"resultmsg":"保存成功"}';
        else 
           echo '{"resultcode":1,"resultmsg":"保存失败，数据库发生了未知错误"}';
    }
    //数码产品库存表期初查询
    public function search(){
        header("Access-Control-Allow-Origin: *");
        $redis = new \Redis();
        $redis->connect("192.111.111.4","6379");
        $dept="admin";
        $js='{"data":[{"tr":[{"dataType":0,"value":"产品类型","rowspan":1,"colspan":1,"product_type":"产品类型","product":"","type":"","type_detail":""},{"dataType":0,"value":"产品型号","rowspan":1,"colspan":1,"product_type":"产品类型","product":"","type":"","type_detail":""},{"dataType":0,"value":"产品规格","rowspan":1,"colspan":1,"product_type":"产品类型","product":"产品规格","type":"","type_detail":""},{"dataType":0,"value":"有效结存","rowspan":1,"colspan":1,"product_type":"产品类型","product":"产品规格","type":"","type_detail":"有效结存"},{"dataType":0,"value":"无效结存","rowspan":1,"colspan":1,"product_type":"产品类型","product":"产品规格","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"三合一（大机）","rowspan":1,"colspan":1,"product_type":"三代机","product":"三合一（大机）","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"三合一（大机）","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"三合一（大机）","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"海星（大机）","rowspan":1,"colspan":1,"product_type":"三代机","product":"海星（大机）","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"海星（大机）","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"海星（大机）","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"金品（大机）","rowspan":1,"colspan":1,"product_type":"三代机","product":"金品（大机）","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"金品（大机）","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"金品（大机）","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"海旋风（小机）","rowspan":1,"colspan":1,"product_type":"三代机","product":"海旋风（小机）","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"海旋风（小机）","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"海旋风（小机）","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"海霸王（小机）","rowspan":1,"colspan":1,"product_type":"三代机","product":"海霸王（小机）","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"海霸王（小机）","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"海霸王（小机）","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"海神号（小机）","rowspan":1,"colspan":1,"product_type":"三代机","product":"海神号（小机）","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"海神号（小机）","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"海神号（小机）","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"海视（大机）","rowspan":1,"colspan":1,"product_type":"三代机","product":"海视（大机）","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"海视（大机）","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"海视（大机）","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"海天（大机）","rowspan":1,"colspan":1,"product_type":"三代机","product":"海天（大机）","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"海天（大机）","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"海天（大机）","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"海思（大机）","rowspan":1,"colspan":1,"product_type":"三代机","product":"海思（大机）","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"海思（大机）","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"海思（大机）","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"科斯特A款（大机）","rowspan":1,"colspan":1,"product_type":"三代机","product":"科斯特A款（大机）","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"科斯特A款（大机）","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"科斯特A款（大机）","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"梦幻（大机）","rowspan":1,"colspan":1,"product_type":"三代机","product":"梦幻（大机）","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"梦幻（大机）","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"梦幻（大机）","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"飓风（小机）","rowspan":1,"colspan":1,"product_type":"三代机","product":"飓风（小机）","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"飓风（小机）","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"飓风（小机）","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"星光（小机）","rowspan":1,"colspan":1,"product_type":"三代机","product":"星光（小机）","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"星光（小机）","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"星光（小机）","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"星火（小机）","rowspan":1,"colspan":1,"product_type":"三代机","product":"星火（小机）","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"星火（小机）","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"星火（小机）","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"星空（小机）","rowspan":1,"colspan":1,"product_type":"三代机","product":"星空（小机）","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"星空（小机）","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"星空（小机）","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"创新号（小机）","rowspan":1,"colspan":1,"product_type":"三代机","product":"创新号（小机）","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"创新号（小机）","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"创新号（小机）","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"其他定位机（大机）","rowspan":1,"colspan":1,"product_type":"三代机","product":"其他定位机（大机）","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"其他定位机（大机）","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"其他定位机（大机）","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"其他定位机（小机）","rowspan":1,"colspan":1,"product_type":"三代机","product":"其他定位机（小机）","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"其他定位机（小机）","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"其他定位机（小机）","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"无卡定位机（大机）","rowspan":1,"colspan":1,"product_type":"三代机","product":"无卡定位机（大机）","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"无卡定位机（大机）","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"无卡定位机（大机）","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"无卡定位机（小机）","rowspan":1,"colspan":1,"product_type":"三代机","product":"无卡定位机（小机）","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"无卡定位机（小机）","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"无卡定位机（小机）","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"海霸王-D（小机）","rowspan":1,"colspan":1,"product_type":"三代机","product":"海霸王-D（小机）","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"海霸王-D（小机）","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"海霸王-D（小机）","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"无卡定做机（小机）","rowspan":1,"colspan":1,"product_type":"三代机","product":"无卡定做机（小机）","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"无卡定做机（小机）","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"无卡定做机（小机）","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"三代机","rowspan":1,"colspan":1,"product_type":"三代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"智能卡","rowspan":1,"colspan":1,"product_type":"三代机","product":"智能卡","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"智能卡","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"三代机","product":"智能卡","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"地面波","rowspan":1,"colspan":1,"product_type":"地面波","product":"","type":"","type_detail":""},{"dataType":0,"value":"地面波","rowspan":1,"colspan":1,"product_type":"地面波","product":"","type":"","type_detail":""},{"dataType":0,"value":"地面波","rowspan":1,"colspan":1,"product_type":"地面波","product":"地面波","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"地面波","product":"地面波","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"地面波","product":"地面波","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"一代机","rowspan":1,"colspan":1,"product_type":"一代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"一代机双","rowspan":1,"colspan":1,"product_type":"一代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"琦鑫仿澜起（Mxv）","rowspan":1,"colspan":1,"product_type":"一代机","product":"琦鑫仿澜起（Mxv）","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"一代机","product":"琦鑫仿澜起（Mxv）","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"一代机","product":"琦鑫仿澜起（Mxv）","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"一代机","rowspan":1,"colspan":1,"product_type":"一代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"一代机双","rowspan":1,"colspan":1,"product_type":"一代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"中天仿澜起（Mkv）","rowspan":1,"colspan":1,"product_type":"一代机","product":"中天仿澜起（Mkv）","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"一代机","product":"中天仿澜起（Mkv）","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"一代机","product":"中天仿澜起（Mkv）","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"一代机","rowspan":1,"colspan":1,"product_type":"一代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"一代机双","rowspan":1,"colspan":1,"product_type":"一代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"一代机双中天（Mk）","rowspan":1,"colspan":1,"product_type":"一代机","product":"一代机双中天（Mk）","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"一代机","product":"一代机双中天（Mk）","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"一代机","product":"一代机双中天（Mk）","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"一代机","rowspan":1,"colspan":1,"product_type":"一代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"一代机单","rowspan":1,"colspan":1,"product_type":"一代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"琦鑫（Jx）","rowspan":1,"colspan":1,"product_type":"一代机","product":"琦鑫（Jx）","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"一代机","product":"琦鑫（Jx）","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"一代机","product":"琦鑫（Jx）","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"一代机","rowspan":1,"colspan":1,"product_type":"一代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"一代机单","rowspan":1,"colspan":1,"product_type":"一代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"中天（Jk）","rowspan":1,"colspan":1,"product_type":"一代机","product":"中天（Jk）","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"一代机","product":"中天（Jk）","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"一代机","product":"中天（Jk）","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"一代机","rowspan":1,"colspan":1,"product_type":"一代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"其他","rowspan":1,"colspan":1,"product_type":"一代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"其他方案","rowspan":1,"colspan":1,"product_type":"一代机","product":"其他方案","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"一代机","product":"其他方案","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"一代机","product":"其他方案","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"一代机","rowspan":1,"colspan":1,"product_type":"一代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"一代机","rowspan":1,"colspan":1,"product_type":"一代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"一代机抽屉","rowspan":1,"colspan":1,"product_type":"一代机","product":"一代机抽屉","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"一代机","product":"一代机抽屉","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"一代机","product":"一代机抽屉","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"一代机","rowspan":1,"colspan":1,"product_type":"一代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"一代机","rowspan":1,"colspan":1,"product_type":"一代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"一代机接口板","rowspan":1,"colspan":1,"product_type":"一代机","product":"一代机接口板","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"一代机","product":"一代机接口板","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"一代机","product":"一代机接口板","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"一代机","rowspan":1,"colspan":1,"product_type":"一代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"一代机","rowspan":1,"colspan":1,"product_type":"一代机","product":"","type":"","type_detail":""},{"dataType":0,"value":"一代机主板","rowspan":1,"colspan":1,"product_type":"一代机","product":"一代机主板","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"一代机","product":"一代机主板","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"一代机","product":"一代机主板","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"DVB","rowspan":1,"colspan":1,"product_type":"DVB","product":"","type":"","type_detail":""},{"dataType":0,"value":"DVB","rowspan":1,"colspan":1,"product_type":"DVB","product":"","type":"","type_detail":""},{"dataType":0,"value":"DVB机","rowspan":1,"colspan":1,"product_type":"DVB","product":"DVB机","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"DVB","product":"DVB机","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"DVB","product":"DVB机","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"高频头","rowspan":1,"colspan":1,"product_type":"高频头","product":"","type":"","type_detail":""},{"dataType":0,"value":"高频头","rowspan":1,"colspan":1,"product_type":"高频头","product":"","type":"","type_detail":""},{"dataType":0,"value":"高频头","rowspan":1,"colspan":1,"product_type":"高频头","product":"高频头","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"高频头","product":"高频头","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"高频头","product":"高频头","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"天线","rowspan":1,"colspan":1,"product_type":"天线","product":"","type":"","type_detail":""},{"dataType":0,"value":"天线","rowspan":1,"colspan":1,"product_type":"天线","product":"","type":"","type_detail":""},{"dataType":0,"value":"0.35天线","rowspan":1,"colspan":1,"product_type":"天线","product":"0.35天线","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"天线","product":"0.35天线","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"天线","product":"0.35天线","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"天线","rowspan":1,"colspan":1,"product_type":"天线","product":"","type":"","type_detail":""},{"dataType":0,"value":"天线","rowspan":1,"colspan":1,"product_type":"天线","product":"","type":"","type_detail":""},{"dataType":0,"value":"0.45天线","rowspan":1,"colspan":1,"product_type":"天线","product":"0.45天线","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"天线","product":"0.45天线","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"天线","product":"0.45天线","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"天线","rowspan":1,"colspan":1,"product_type":"天线","product":"","type":"","type_detail":""},{"dataType":0,"value":"天线","rowspan":1,"colspan":1,"product_type":"天线","product":"","type":"","type_detail":""},{"dataType":0,"value":"自产天线","rowspan":1,"colspan":1,"product_type":"天线","product":"自产天线","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"天线","product":"自产天线","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"天线","product":"自产天线","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"天线","rowspan":1,"colspan":1,"product_type":"天线","product":"","type":"","type_detail":""},{"dataType":0,"value":"天线","rowspan":1,"colspan":1,"product_type":"天线","product":"","type":"","type_detail":""},{"dataType":0,"value":"外购天线","rowspan":1,"colspan":1,"product_type":"天线","product":"外购天线","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"天线","product":"外购天线","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"天线","product":"外购天线","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"充电器","rowspan":1,"colspan":1,"product_type":"充电器","product":"","type":"","type_detail":""},{"dataType":0,"value":"充电器","rowspan":1,"colspan":1,"product_type":"充电器","product":"","type":"","type_detail":""},{"dataType":0,"value":"充电器","rowspan":1,"colspan":1,"product_type":"充电器","product":"充电器","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"充电器","product":"充电器","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"充电器","product":"充电器","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"充电器","rowspan":1,"colspan":1,"product_type":"充电器","product":"","type":"","type_detail":""},{"dataType":0,"value":"其他电控","rowspan":1,"colspan":1,"product_type":"充电器","product":"","type":"","type_detail":""},{"dataType":0,"value":"其他电控","rowspan":1,"colspan":1,"product_type":"充电器","product":"其他电控","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"充电器","product":"其他电控","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"充电器","product":"其他电控","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"其他产品","rowspan":1,"colspan":1,"product_type":"其他产品","product":"","type":"","type_detail":""},{"dataType":0,"value":"充电宝","rowspan":1,"colspan":1,"product_type":"其他产品","product":"","type":"","type_detail":""},{"dataType":0,"value":"充电宝","rowspan":1,"colspan":1,"product_type":"其他产品","product":"充电宝","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"其他产品","product":"充电宝","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"其他产品","product":"充电宝","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"其他产品","rowspan":1,"colspan":1,"product_type":"其他产品","product":"","type":"","type_detail":""},{"dataType":0,"value":"网络播放器","rowspan":1,"colspan":1,"product_type":"其他产品","product":"","type":"","type_detail":""},{"dataType":0,"value":"网络播放器","rowspan":1,"colspan":1,"product_type":"其他产品","product":"网络播放器","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"其他产品","product":"网络播放器","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"其他产品","product":"网络播放器","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"其他产品","rowspan":1,"colspan":1,"product_type":"其他产品","product":"","type":"","type_detail":""},{"dataType":0,"value":"两轮电动车","rowspan":1,"colspan":1,"product_type":"其他产品","product":"","type":"","type_detail":""},{"dataType":0,"value":"两轮电动车","rowspan":1,"colspan":1,"product_type":"其他产品","product":"两轮电动车","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"其他产品","product":"两轮电动车","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"其他产品","product":"两轮电动车","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"其他产品","rowspan":1,"colspan":1,"product_type":"其他产品","product":"","type":"","type_detail":""},{"dataType":0,"value":"三轮电动车","rowspan":1,"colspan":1,"product_type":"其他产品","product":"","type":"","type_detail":""},{"dataType":0,"value":"三轮电动车","rowspan":1,"colspan":1,"product_type":"其他产品","product":"三轮电动车","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"其他产品","product":"三轮电动车","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"其他产品","product":"三轮电动车","type":"","type_detail":"无效结存"}]},{"tr":[{"dataType":0,"value":"其他产品","rowspan":1,"colspan":1,"product_type":"其他产品","product":"","type":"","type_detail":""},{"dataType":0,"value":"电池","rowspan":1,"colspan":1,"product_type":"其他产品","product":"","type":"","type_detail":""},{"dataType":0,"value":"电池","rowspan":1,"colspan":1,"product_type":"其他产品","product":"电池","type":"","type_detail":""},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"其他产品","product":"电池","type":"","type_detail":"有效结存"},{"dataType":1,"value":0,"rowspan":1,"colspan":1,"product_type":"其他产品","product":"电池","type":"","type_detail":"无效结存"}]}]}';
        $redis->set("report-$dept-SMCPKCQC",$js);
        $now=date("Ym");
        $key="report-$dept-$now-SMCPKCQC";
        $json=json_decode($redis->get($key),true);
        
        print_r($json);
//           if(!empty($json))
//             echo json_encode($json['TJ']); 
//            else 
//             echo $redis->get("report-$dept-SMCPKCQC"); 
           
    }
    
    public function test(){
        $redis = new \Redis();
        $redis->connect("192.111.111.4","6379");
     
       $dept="admin";
       $now=date("Ym");
       $month=date("Ym");
         $key="report-".$dept."-".$now."-SMCPKCQC";
        $json=json_decode($redis->get($key),true);
        $SMCPKCQC=json_decode($redis->get("report-admin-$month-SMCPKCQC"),true);
        $qcjs=$SMCPKCQC['QC'];
        print_r($qcjs);
       // echo json_encode($json["JS"]); 
       echo md5("三代机 三合一(大机) 	海星(大机)有效结存")."<br>";
       echo md5("三代机三合一(大机)有效结存");
    }
}


?>