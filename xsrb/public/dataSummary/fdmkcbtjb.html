<style type="text/css">
	/*分页*/
	
	.pagination_FDMKCBTJB {
		float: right;
		margin-top: 0px;
	}
	
	.pagination_FDMKCBTJB a {
		display: inline-block;
		color: #555;
		height: 18px;
		line-height: 18px;
		padding: 0 10px;
		borde_digital_storer: 1px solid #edf3f4;
		margin: 0px 2px;
		borde_digital_storer-radius: 4px;
		vertical-align: middle;
	}
	
	.pagination_FDMKCBTJB a :hover {
		text-decoration: none;
		borde_digital_storer: 1px solid darkolivegreen;
	}
	
	.pagination_FDMKCBTJB span.current,
	.pagination_FDMKCBTJB span.disabled {
		display: inline-block;
		height: 18px;
		line-height: 18px;
		padding: 0 10px;
		margin: 0 2px;
		borde_digital_storer-radius: 4px;
		vertical-align: middle;
	}
	
	.pagination_FDMKCBTJB span.current {
		color: #fff;
		background-color: #cfebee;
		borde_digital_storer: 1px solid #b8d0d6;
	}
	
	.pagination_FDMKCBTJB span.disabled {
		color: #bfbfbf;
		background: #f2f2f2;
		borde_digital_storer: 1px solid #bfbfbf;
	}
	
	.pagination_FDMKCBTJB .input_page {
		width: 50px;
		height: 12px;
		padding: 2px;
		borde_digital_storer-radius: 3px;
		borde_digital_storer: 1px solid #555;
	}
	
	.pagination_FDMKCBTJB.go {
		margin-left: 2%;
		height: 20px;
		line-height: 20px;
		font-size: 10px;
		width: 35px;
		borde_digital_storer-radius: 3px;
		borde_digital_storer: none;
		background-color: #ddd;
	}
	
	.pagination_FDMKCBTJB.go:hover {
		background-color: #cfebee;
	}
	/*分页结束*/
	
	.pageContent_FDMKCBTJB table {
		border: none;
	}
	
	.tableLeft th,
	.tableLeft td {
		background-color: rgb(153, 204, 255);
		text-align: center;
		padding: 3px 5px;
	}
	
	.containeRight {
		position: relative;
	}
	
	.containeRight table {
		/*border-collapse: collapse;*/
		position: relative;
	}
	
	.containeRight thead tr:nth-child(1) {
		background: rgb(204, 153, 255)!important;
	}
	
	.containeRight thead tr:nth-child(2),
	.containeRight thead tr:nth-child(3),
	.containeRight thead tr:nth-child(4) {
		background: rgb(204, 255, 255)!important;
	}
	
	.containeRight td,
	.containeRight td {
		color: #000;
		padding: 3px 5px;
		text-align: center;
	}
	/*输出按钮*/
	
	.headbutton {
		float: left;
		background: none;
		display: inline-block;
		margin: auto 15px auto 15px;
		height: 26px;
		overflow: hidden;
	}
	
	.headbutton span {
		background: none;
		height: 26px;
		display: inline-block;
		margin-left: 5px;
	}
	
	.headbutton:hover {
		background: url(themes/default/images/button/button_s.png) no-repeat 0 -100px;
	}
	
	.headbutton:hover span {
		background: url(themes/default/images/button/button_s.png) no-repeat 100% -150px;
		;
	}
	
	.headbutton i {
		display: inline-block;
		height: 21px;
		line-height: 26px;
		font-style: normal;
	}
	
	.nav1 {
		display: inline-block;
		padding-right: 5px;
	}
	
	.borde {
		float: left;
		height: 8px;
		display: inline-block;
		margin: 7px auto auto 10px;
		border: 0.1px solid #D8D8D8;
	}
	
	.sdate_label {
		display: inline-block;
		padding-left: 15px;
	}
	
	.pageContent_FDMKCBTJB {
		min-width: 940px;
	}
</style>
</head>

<body>
	<div class="pageHeader" style="overflow: hidden;">
		<div class="borde"></div>
		<a class="headbutton" href="javascript:download_FDMKCBTJB();"><span><i class="nav1" style="background: url(public/initialStage/images/alllicon.png) no-repeat 0px -392px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;输出</i></span></a>
		<!--<a class="headbutton_v2" id="#" href="javascript:download123();"><span><i class="nav1_digital_store" style="background: url(public/initialStage/images/alllicon.png) no-repeat 0px -392px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;输出</i></span></a>-->
		<div class="borde"></div>
		<label class="sdate_label">开始日期</label>
		<input id="sdate_FDMKCBTJB" class="date" dateFmt="yyyy-MM-dd" maxDate="{%y}-%M-{%d}" readonly="readonly" />
		<label class="edate_label">结束日期</label>
		<input id="edate_FDMKCBTJB" class="date" dateFmt="yyyy-MM-dd" maxDate="{%y}-%M-{%d}" readonly="readonly" />
		<button id="search_date_FDMKCBTJB"> 查询</button>

	</div>
	<div class="pageContent pageContent_FDMKCBTJB" layoutH="60">
		<div id="pageContainer_FDMKCBTJB"></div>
	</div>
	</div>
	<div class="panelBar">
		<div class="pagination_FDMKCBTJB"></div>
	</div>

	<script type="text/x-jsrender" id="renderStr_FDMKCBTJB">
		<div id="containerLeft_FDMKCBTJB">
			<table id="tableLeft_FDMKCBTJB" class="tableLeft" border="1">
				<tbody>
					{{for leftTitle}}
					<tr>
						{{for tr}}
						<td rowspan="{{:rowspan}}" colspan="{{:colspan}}">{{:value}}</td>
						{{/for}}
					</tr>
					{{/for}}
				</tbody>
			</table>
		</div>
		<div id="containeRight_FDMKCBTJB" class="containeRight">
			{{for data}}
			<table id="tableRight_FDMKCBTJB{{:#getIndex()}}" border="1">
				<thead>
					{{for topTitle}}
					<tr>
						{{for tr}}
						<td rowspan="{{:rowspan}}" colspan="{{:colspan}}">{{:value}}</td>
						{{/for}}
					</tr>
					{{/for}}
				</thead>
				<tbody>
					{{for content}}
					<tr>
						{{for tr}}
						<td rowspan="{{:rowspan}}" colspan="{{:colspan}}">{{:value}}</td>
						{{/for}}
					</tr>
					{{/for}}
				</tbody>
			</table>
			{{/for}}
		</div>
	</script>
</body>
<script type="text/javascript">
	$(function() {
		table_flag = 0;
		setDateSearch("_FDMKCBTJB", "1");   //common中设置默认时间
		get_FDMKCBTJB();
		$("#search_date_FDMKCBTJB").click(function() {
			get_FDMKCBTJB();
		})
	})
	//导出
	function download_FDMKCBTJB() {
		var url_downl = URL_Z + "/FDMKCBTJB/toexcel/token/" + token;
		var sdate = $("#sdate_FDMKCBTJB").val();
		if(sdate) {
			sdate = sdate.replace(/\-/g, "");
			var edate = $("#edate_FDMKCBTJB").val();
			if(edate) {
				edate = edate.replace(/\-/g, "");
				if(parseInt(edate) < parseInt(sdate)) {
					alertMsg.warn("起始时间比结束时间大！！！");
					return;
				}
			} else {
				var mydate = new Date();
				edate = String(mydate.getFullYear());
				var mon = mydate.getMonth() + 1;
				if(mon < 10) {
					mon = "0" + mon;
				}
				var day = mydate.getDate();
				if(day < 10) {
					day = "0" + day;
				}
				edate = String(edate) + String(mon) + String(day);
			}
			url_downl = url_downl + "/sdate/" + sdate + "/edate/" + edate;
		}
		$.ajax({
			type: "get",
			url: url_downl,
			async: true,
			dateType: 'json',
			success: function(data) {
				console.log(JSON.parse(data).excel_url);
				if(JSON.parse(data).hasOwnProperty("excel_url")) {
					window.open(JSON.parse(data).excel_url);
				} else if(data.hasOwnProperty("resultcode")) {
					if(data.resultcode == -2) {
						alertMsg.warn("你的账号在其他地方登录了或者已经超时，请重新登录！");
						window.location.href = "index.html";
					}
				}
			},
			error: function() {
				alertMsg.warn("加载失败，刷新或者检查网络设置！");
			}
		});

	}
	//获取默认数据
	function get_FDMKCBTJB() {
		var url_FDMKCBTJB = URL_Z + "FDMKCBTJB/search/token/" + token;

		var sdate = $("#sdate_FDMKCBTJB").val();
		if(sdate) {
			sdate = sdate.replace(/\-/g, "");
			var edate = $("#edate_FDMKCBTJB").val();
			if(edate) {
				edate = edate.replace(/\-/g, "");
				if(parseInt(edate) < parseInt(sdate)) {
					alertMsg.warn("起始时间比结束时间大！！！");
					return;
				}
			} else {
				var mydate = new Date();
				edate = String(mydate.getFullYear());
				var mon = mydate.getMonth() + 1;
				if(mon < 10) {
					mon = "0" + mon;
				}
				var day = mydate.getDate();
				if(day < 10) {
					day = "0" + day;
				}
				edate = String(edate) + String(mon) + String(day);
			}
			url_FDMKCBTJB = url_FDMKCBTJB + "/sdate/" + sdate + "/edate/" + edate;
		}
		$.ajax({
			type: "get",
			url: url_FDMKCBTJB,
			dataType: "json",
			async: true,
			cache: false,
			success: function(data) {
				if(data.hasOwnProperty("resultcode")) {
					if(data.resultcode == -2) {
						alertMsg.warn("你的账号在其他地方登录了或者已经超时，请重新登录！");
						window.location.href = "index.html";
					}
				} else if(data.total == 'null' || data.total == null || data.total == undefined) {
					alertMsg.info("暂无数据！");
				} else {
					$("#pageContainer_FDMKCBTJB").html("");
					var tableContent_FDMKCBTJB = $("#renderStr_FDMKCBTJB").render(data);
					$("#pageContainer_FDMKCBTJB").append(tableContent_FDMKCBTJB);
					var table_width = $(".pageContent_FDMKCBTJB").width() - 17 + "px";
					tablesFixed(table_width, "500", data, "_FDMKCBTJB");
					window.setInterval(function() { tablesFixed_resize("_FDMKCBTJB"); }, 100);
					$(".pagination_FDMKCBTJB").createPage({
						pageCount: data.total, //总页数
						current: data.page, //初始页号
						backFn: function(obj) {
							get_FDMKCBTJB_page(url_FDMKCBTJB, obj); //修改为product
						}
					});
				}
			},
			error: function(XMLHttpRequest, textStatus, errorThrown) {
				alertMsg.warn("加载失败，刷新或者检查网络设置！");
			}
		});
	}
	//分页
	function get_FDMKCBTJB_page(url_page, page) {
		$.ajax({
			type: "get",
			url: url_page + "/page/" + page,
			dataType: "json",
			async: true,
			cache: false,
			success: function(data) {
				if(data.hasOwnProperty("resultcode")) {
					if(data.resultcode == -2) {
						alertMsg.warn("你的账号在其他地方登录了或者已经超时，请重新登录！");
						window.location.href = "index.html";
					}
				} else if(data.total == 'null' || data.total == null || data.total == undefined) {
					alertMsg.info("暂无数据！");
				} else {
					$("#pageContainer_FDMKCBTJB").html("");
					var tableContent_FDMKCBTJB = $("#renderStr_FDMKCBTJB").render(data);
					$("#pageContainer_FDMKCBTJB").append(tableContent_FDMKCBTJB);
					var table_width = $(".pageContent_FDMKCBTJB").width() - 17 + "px";
					tablesFixed(table_width, "500", data, "_FDMKCBTJB");
					window.setInterval(function() { tablesFixed_resize("_FDMKCBTJB"); }, 100);
				}
			},
			error: function(XMLHttpRequest, textStatus, errorThrown) {
				alertMsg.warn("加载失败，刷新或者检查网络设置！");
			}
		});
	}
</script>

</html>